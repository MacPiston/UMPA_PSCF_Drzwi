import Head from 'next/head'
import Image from 'next/image'
import React from 'react'
import styles from '../styles/User.module.css'

class User {
    constructor(email, pass) {
        this.email = email;
        this.password = pass;
    }
}

class UserAdminPanelApp extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            users: [new User("test@gmail.com", "12345678"), new User("test@gmail.com", "12345678"), new User("xd@lol.com", "123"),
            new User("asdlasdo@sfsl.com", "12asdad3")
            ], text: ''
        };
    }

    render() {
        return (
            <div className={styles.container}>
                <Head>
                    <title>Użytkownicy</title>
                    <meta name="description" content="Generated by create next app" />
                    <link rel="icon" href="/favicon.ico" />
                </Head>
                <main className={styles.main}>
                    <h1 className={styles.title}>
                        Użytkownicy
                </h1>
                    <UserTable items={this.state.users} />
                    <div className={styles.box}>
                        <AddUserForm />
                        <DeleteUserForm />
                    </div>
                </main>
            </div>
        );
    }
}

class AddUserForm extends React.Component {
    constructor(props) {
        super(props);
        this.state = { email: '', password: '' };

        this.handleChangeEmail = this.handleChangeEmail.bind(this);
        this.handleChangePassword = this.handleChangePassword.bind(this);

        this.handleSubmit = this.handleSubmit.bind(this);
    }

    handleChangeEmail(event) {
        this.setState({ email: event.target.value });
    }

    handleChangePassword(event) {
        this.setState({ password: event.target.value });
    }

    handleSubmit(event) {
        alert('Podano następujący email: ' + this.state.email + this.state.password);
        event.preventDefault();
        this.setState({ email: '', password: '' });
    }

    render() {
        return (
            <form className={styles.form, styles.addform} onSubmit={this.handleSubmit}>
                <h2>Add user</h2>
                <input className={styles.inputtext} placeholder="Email" type="text" value={this.state.email} onChange={this.handleChangeEmail} />
                <input className={styles.inputtext} placeholder="Password" type="password" value={this.state.password} onChange={this.handleChangePassword} />
                <input className={styles.inputsubmit} type="submit" value="Add new user" />
            </form>
        );
    }
}

class DeleteUserForm extends React.Component {
    constructor(props) {
        super(props);
        this.state = { email: '' };

        this.handleChange = this.handleChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
    }

    handleChange(event) {
        this.setState({ email: event.target.value });
    }

    handleSubmit(event) {
        alert('Podano następujący email: ' + this.state.email);
        event.preventDefault();
        this.setState({ email: '' });
    }

    render() {
        return (

            <form className={styles.form} onSubmit={this.handleSubmit}>
                <h2>Delete user</h2>
                <input className={styles.inputtext} type="text" placeholder="Email" value={this.state.email} onChange={this.handleChange} />
                <input className={styles.inputsubmit} type="submit" value="Delete selected user" />
            </form>
        );
    }
}

class UserTable extends React.Component {
    constructor(props) {
        super(props);
        this.state = { index: 1 }
    }
    render() {
        return (
            <div className={styles.table}>
                <div className={styles.tableheader}>
                    <div className={styles.headerItem}>Lp.</div>
                    <div className={styles.headerItem}>Email</div>
                    <div className={styles.headerItem}>Password</div>
                </div>
                {this.props.items.map(item => (
                    <div className={styles.tableRow} key={this.state.index++}>
                        <div className={styles.tableData}>{this.state.index++}</div>
                        <div className={styles.tableData}>{item.email}</div>
                        <div className={styles.tableData}>{item.password}</div>
                    </div>
                ))}
            </div>
        );
    }
}

/*export default function Home() {
    return (
        <div className={styles.container}>
            <Head>
                <title>Użytkownicy</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <main className={styles.main}>
                <h1 className={styles.title}>
                    Użytkownicy
                </h1>
                <UserTable />
                <AddUserForm />
                <DeleteUserForm />
            </main>
        </div>
    )
}*/

export default function Main() {
    return (
        <UserAdminPanelApp />
    );
}
